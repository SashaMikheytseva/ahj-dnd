!function(){"use strict";class e{constructor(e){this.content=e}createCard(e){return` \n        <div class="card-wrapper">\n            <div class="card-content">${e}</div>\n            <span class="card-remover">X</span>\n        </div>\n        `}removeCard(e){e.remove()}}class t{constructor(e){this.parentEl=e,this.cardEl=e.querySelector(".card_box")}getMarkDown(){return'<div class="columns">\n                    <div class="col todo">\n                        <div class="col__header">\n                            <h3 class="col__title">Todo</h3>\n                            <div class="settings">...</div>  \n                        </div>\n                        <div class="card_box"></div>\n                        <div class="box_footer">\n                            <button type="button" class="btn_open-form" >+ Add another card</button>\n                        </div>\n                        <form name="todoadd" class="add-card">\n                            <span class="error">Please, enter card content!</span>\n                            <textarea name="todo" class="enter-text"></textarea>\n                            <div class="add-card_btns">\n                                <button type="submit" class="btn_add">Add Card</button>\n                                <button class="form-remover">X</button>\n                            </div>\n                        </form>\n                    </div>\n\n                    <div class="col inprogress">\n                        <div class="col__header">\n                            <h3 class="col__title">InProgress</h3>\n                            <div class="settings">...</div>  \n                        </div>\n                        <div class="card_box"></div>\n                        <div class="box_footer">\n                            <button type="button" class="btn_open-form" >+ Add another card</button>\n                        </div>\n                        <form name="inprogressadd" class="add-card">\n                            <span class="error">Please, enter card content!</span>\n                            <textarea name="inprogress" class="enter-text"></textarea>\n                            <div class="add-card_btns">\n                                <button type="submit" class="btn_add">Add Card</button>\n                                <button class="form-remover">X</button>\n                            </div>\n                        </form>\n                    </div>\n\n                    <div class="col done">\n                        <div class="col__header">\n                            <h3 class="col__title">DONE</h3>\n                            <div class="settings">...</div>  \n                        </div>\n                        <div class="card_box"></div>\n                        <div class="box_footer">\n                            <button type="button" class="btn_open-form" >+ Add another card</button>\n                        </div>\n                        <form name="doneadd" class="add-card">\n                            <span class="error">Please, enter card content!</span>\n                            <textarea name="done" class="enter-text"></textarea>\n                            <div class="add-card_btns">\n                                <button type="submit" class="btn_add">Add Card</button>\n                                <button class="form-remover">X</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n        '}bindToDOM(e){this.parentEl.insertAdjacentHTML("beforeend",e),this.addListeners()}addListeners(){const t=document.querySelector(".columns"),s=document.querySelectorAll(".add-card");t.addEventListener("click",(t=>{const{target:s}=t;if(s.classList.contains("btn_open-form")&&this.openForm(s),s.classList.contains("form-remover")&&this.closeForm(s),s.classList.contains("card-remover")){const t=s.closest(".card-wrapper");(new e).removeCard(t),localStorage.setItem("task",this.parentEl.innerHTML)}})),t.addEventListener("input",(e=>{const{target:t}=e;t.classList.contains("enter-text")&&this.closeError(t)})),s.forEach((e=>{e.addEventListener("submit",(t=>{const{target:s}=t,n=s.closest(".col");t.preventDefault(),this.addCard(e,s,n)}))}))}openForm(e){e.style.display="none",e.closest(".col").querySelector(".add-card").classList.add("active")}closeForm(e){const t=e.closest(".col"),s=t.querySelector(".add-card"),n=t.querySelector(".btn_open-form");s.classList.remove("active"),n.style.display="block"}showError(){document.querySelector(".error").classList.add("err-active")}closeError(e){e.previousElementSibling.classList.remove("err-active")}addCard(t,s,n){const r=t.querySelector(".enter-text"),a=n.querySelector(".card_box");if(!r.value)return void this.showError();const o=new e(r.value),d=o.createCard(o.content);a.insertAdjacentHTML("afterbegin",d),r.value="",this.closeForm(s),localStorage.setItem("task",this.parentEl.innerHTML)}}const s=document.querySelector(".container");new class{constructor(e){this.parentEl=e,this.draggedEl=null,this.draggingClone=null}bindToDOM(){const e=new t(this.parentEl);localStorage.getItem("task")?e.bindToDOM(localStorage.getItem("task")):e.bindToDOM(e.getMarkDown()),this.columns=this.parentEl.querySelector(".columns"),this.addListeners()}addListeners(){this.columns.addEventListener("mouseover",(e=>{const{target:t}=e;t.classList.contains("card-remover")&&t.classList.add("remove-active"),(t.classList.contains("card-wrapper")||t.classList.contains("card-content"))&&t.closest(".card-wrapper").querySelector(".card-remover").classList.add("remove-active")})),this.columns.addEventListener("mouseout",(e=>{const{target:t}=e;(t.classList.contains("card-wrapper")||t.classList.contains("card-content"))&&t.closest(".card-wrapper").querySelector(".card-remover").classList.remove("remove-active")})),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.onMouseUp)}onMouseDown=e=>{const{target:t}=e;t.closest(".card-wrapper")&&(this.draggedEl=t.closest(".card-wrapper"),this.shiftX=e.offsetX,this.shiftY=e.offsetY,this.draggedEl.style.left=e.clientX-this.shiftX+"px",this.draggedEl.style.top=e.clientY-this.shiftY+"px",this.onDragged(e),document.addEventListener("mousemove",this.onMouseMove))};onMouseUp=()=>{this.draggedEl&&(this.draggedEl.classList.remove("dragged"),this.replaceDragging()),this.clear(),document.removeEventListener("mousemove",this.onMouseMove),localStorage.setItem("task",this.parentEl.innerHTML)};onMouseMove=e=>{if(e.preventDefault(),e.target.closest(".card-wrapper"),this.draggedEl){this.draggedEl.style.left=e.clientX-this.shiftX+"px",this.draggedEl.style.top=e.clientY-this.shiftY+"px";const{width:t}=window.getComputedStyle(this.draggedEl);this.draggedEl.classList.add("dragged"),this.draggedEl.style.width=t,this.onDragged(e)}};onDragged=e=>{const t=e.target.closest(".card-wrapper"),s=e.target.classList.contains("col");if(t){const s=this.createCloneEl(t),{y:n,height:r}=t.getBoundingClientRect(),a=n+r/2>e.clientY?"beforebegin":"afterend";this.draggingClone?(this.draggingClone.remove(),t.insertAdjacentElement(a,this.draggingClone)):this.draggingClone=s}if(s){const t=e.target.querySelector(".card_box");[...t.children].length&&1!==t.children.length||(this.draggingClone.remove(),t.append(this.draggingClone))}};createCloneEl(e){const t=e.getBoundingClientRect(),s=t.width,n=t.height,r=document.createElement("div");return r.classList.add("clone"),r.style.width=`${s}px`,r.style.height=`${n}px`,r}replaceDragging(){this.draggingClone.replaceWith(this.draggedEl)}clear(){this.draggedEl=null,this.draggingClone=null}}(s).bindToDOM()}();
//# sourceMappingURL=main.js.map