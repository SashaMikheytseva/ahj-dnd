{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-dnd/./src/js/Card.js","webpack://ahj-dnd/./src/js/Columns.js","webpack://ahj-dnd/./src/js/app.js","webpack://ahj-dnd/./src/js/mouseControl.js"],"sourcesContent":["export default class Card {\n  constructor(content) {\n    this.content = content;\n  }\n\n  createCard(content) {\n    return ` \n        <div class=\"card-wrapper\">\n            <div class=\"card-content\">${content}</div>\n            <span class=\"card-remover\">X</span>\n        </div>\n        `;\n  }\n\n  removeCard(cardEl) {\n    cardEl.remove();\n  }\n}\n","import Card from './Card';\n\nexport default class Columns {\n  constructor(parentEl) {\n    this.parentEl = parentEl;\n    this.cardEl = parentEl.querySelector('.card_box');\n  }\n\n  getMarkDown() {\n    return `<div class=\"columns\">\n                    <div class=\"col todo\">\n                        <div class=\"col__header\">\n                            <h3 class=\"col__title\">Todo</h3>\n                            <div class=\"settings\">...</div>  \n                        </div>\n                        <div class=\"card_box\"></div>\n                        <div class=\"box_footer\">\n                            <button type=\"button\" class=\"btn_open-form\" >+ Add another card</button>\n                        </div>\n                        <form name=\"todoadd\" class=\"add-card\">\n                            <span class=\"error\">Please, enter card content!</span>\n                            <textarea name=\"todo\" class=\"enter-text\"></textarea>\n                            <div class=\"add-card_btns\">\n                                <button type=\"submit\" class=\"btn_add\">Add Card</button>\n                                <button class=\"form-remover\">X</button>\n                            </div>\n                        </form>\n                    </div>\n\n                    <div class=\"col inprogress\">\n                        <div class=\"col__header\">\n                            <h3 class=\"col__title\">InProgress</h3>\n                            <div class=\"settings\">...</div>  \n                        </div>\n                        <div class=\"card_box\"></div>\n                        <div class=\"box_footer\">\n                            <button type=\"button\" class=\"btn_open-form\" >+ Add another card</button>\n                        </div>\n                        <form name=\"inprogressadd\" class=\"add-card\">\n                            <span class=\"error\">Please, enter card content!</span>\n                            <textarea name=\"inprogress\" class=\"enter-text\"></textarea>\n                            <div class=\"add-card_btns\">\n                                <button type=\"submit\" class=\"btn_add\">Add Card</button>\n                                <button class=\"form-remover\">X</button>\n                            </div>\n                        </form>\n                    </div>\n\n                    <div class=\"col done\">\n                        <div class=\"col__header\">\n                            <h3 class=\"col__title\">DONE</h3>\n                            <div class=\"settings\">...</div>  \n                        </div>\n                        <div class=\"card_box\"></div>\n                        <div class=\"box_footer\">\n                            <button type=\"button\" class=\"btn_open-form\" >+ Add another card</button>\n                        </div>\n                        <form name=\"doneadd\" class=\"add-card\">\n                            <span class=\"error\">Please, enter card content!</span>\n                            <textarea name=\"done\" class=\"enter-text\"></textarea>\n                            <div class=\"add-card_btns\">\n                                <button type=\"submit\" class=\"btn_add\">Add Card</button>\n                                <button class=\"form-remover\">X</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n        `;\n  }\n\n  bindToDOM(markDown) {\n    this.parentEl.insertAdjacentHTML('beforeend', markDown);\n    this.addListeners();\n  }\n\n  addListeners() {\n    const columns = document.querySelector('.columns');\n    const forms = document.querySelectorAll('.add-card');\n\n    columns.addEventListener('click', (e) => {\n      const { target } = e;\n      if (target.classList.contains('btn_open-form')) {\n        this.openForm(target);\n      }\n\n      if (target.classList.contains('form-remover')) {\n        this.closeForm(target);\n      }\n\n      if (target.classList.contains('card-remover')) {\n        const el = target.closest('.card-wrapper');\n        const card = new Card();\n        card.removeCard(el);\n        localStorage.setItem('task', this.parentEl.innerHTML);\n      }\n    });\n\n    columns.addEventListener('input', (e) => {\n      const { target } = e;\n      if (target.classList.contains('enter-text')) {\n        this.closeError(target);\n      }\n    });\n\n    forms.forEach((form) => {\n      form.addEventListener('submit', (e) => {\n        const { target } = e;\n        const parent = target.closest('.col');\n        e.preventDefault();\n        this.addCard(form, target, parent);\n      });\n    });\n  }\n\n  openForm(target) {\n    target.style.display = 'none';\n    const col = target.closest('.col');\n    const form = col.querySelector('.add-card');\n    form.classList.add('active');\n  }\n\n  closeForm(target) {\n    const col = target.closest('.col');\n    const form = col.querySelector('.add-card');\n    const btn = col.querySelector('.btn_open-form');\n\n    form.classList.remove('active');\n    btn.style.display = 'block';\n  }\n\n  showError() {\n    const err = document.querySelector('.error');\n    err.classList.add('err-active');\n  }\n\n  closeError(textArea) {\n    const err = textArea.previousElementSibling;\n    err.classList.remove('err-active');\n  }\n\n  addCard(form, target, parent) {\n    const textArea = form.querySelector('.enter-text');\n    const cardsContainer = parent.querySelector('.card_box');\n\n    if (!textArea.value) {\n      this.showError();\n      return;\n    }\n\n    const card = new Card(textArea.value);\n    const cardCreation = card.createCard(card.content);\n\n    cardsContainer.insertAdjacentHTML('afterbegin', cardCreation);\n    textArea.value = '';\n    this.closeForm(target);\n    localStorage.setItem('task', this.parentEl.innerHTML);\n  }\n}\n","import Card from './Card';\nimport Columns from './Columns';\nimport Control from './mouseControl';\n\nconst container = document.querySelector('.container');\nconst start = new Control(container);\nstart.bindToDOM();\n","import Columns from './Columns';\n\nexport default class Control {\n  constructor(parentEl) {\n    this.parentEl = parentEl;\n    this.draggedEl = null;\n    this.draggingClone = null;\n  }\n\n  bindToDOM() {\n    const cols = new Columns(this.parentEl);\n\n    if (localStorage.getItem('task')) {\n      cols.bindToDOM(localStorage.getItem('task'));\n    } else {\n      cols.bindToDOM(cols.getMarkDown());\n    }\n\n    this.columns = this.parentEl.querySelector('.columns');\n    this.addListeners();\n  }\n\n  addListeners() {\n    this.columns.addEventListener('mouseover', (e) => {\n      const { target } = e;\n      if (target.classList.contains('card-remover')) target.classList.add('remove-active');\n      if (target.classList.contains('card-wrapper') || target.classList.contains('card-content')) {\n        const cardWrapper = target.closest('.card-wrapper');\n        const remover = cardWrapper.querySelector('.card-remover');\n        remover.classList.add('remove-active');\n      }\n    });\n\n    this.columns.addEventListener('mouseout', (e) => {\n      const { target } = e;\n      if (target.classList.contains('card-wrapper') || target.classList.contains('card-content')) {\n        const cardWrapper = target.closest('.card-wrapper');\n        const remover = cardWrapper.querySelector('.card-remover');\n        remover.classList.remove('remove-active');\n      }\n    });\n\n    document.addEventListener('mousedown', this.onMouseDown);\n    document.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  onMouseDown = (e) => {\n    const { target } = e;\n    if (target.closest('.card-wrapper')) {\n      this.draggedEl = target.closest('.card-wrapper');\n\n      this.shiftX = e.offsetX;\n      this.shiftY = e.offsetY;\n      this.draggedEl.style.left = `${e.clientX - this.shiftX}px`;\n      this.draggedEl.style.top = `${e.clientY - this.shiftY}px`;\n\n      this.onDragged(e);\n      document.addEventListener('mousemove', this.onMouseMove);\n    }\n  };\n\n  onMouseUp = () => {\n    if (this.draggedEl) {\n      this.draggedEl.classList.remove('dragged');\n      this.replaceDragging();\n    }\n    this.clear();\n    document.removeEventListener('mousemove', this.onMouseMove);\n    localStorage.setItem('task', this.parentEl.innerHTML);\n  };\n\n  onMouseMove = (e) => {\n    e.preventDefault();\n    const target = e.target.closest('.card-wrapper');\n\n    if (this.draggedEl) {\n      this.draggedEl.style.left = `${e.clientX - this.shiftX}px`;\n      this.draggedEl.style.top = `${e.clientY - this.shiftY}px`;\n\n      const { width } = window.getComputedStyle(this.draggedEl);\n      this.draggedEl.classList.add('dragged');\n      this.draggedEl.style.width = width;\n      this.onDragged(e);\n    }\n  };\n\n  onDragged = (e) => {\n    const target = e.target.closest('.card-wrapper');\n    const column = e.target.classList.contains('col');\n\n    // если навели на карточку\n    if (target) {\n      const cloneEl = this.createCloneEl(target);\n\n      const { y, height } = target.getBoundingClientRect();\n      const appendPosition = y + height / 2 > e.clientY\n        ? 'beforebegin'\n        : 'afterend';\n      if (!this.draggingClone) {\n        this.draggingClone = cloneEl;\n      } else {\n        this.draggingClone.remove();\n        target.insertAdjacentElement(appendPosition, this.draggingClone);\n      }\n    }\n\n    if (column) {\n      const cardsContainer = e.target.querySelector('.card_box');\n      if (![...cardsContainer.children].length || cardsContainer.children.length === 1) {\n        this.draggingClone.remove();\n        cardsContainer.append(this.draggingClone);\n      }\n    }\n  };\n\n  createCloneEl(el) {\n    const dragRect = el.getBoundingClientRect();\n    const cloneWidth = dragRect.width;\n    const cloneHeight = dragRect.height;\n\n    const cloneEl = document.createElement('div');\n    cloneEl.classList.add('clone');\n\n    cloneEl.style.width = `${cloneWidth}px`;\n    cloneEl.style.height = `${cloneHeight}px`;\n\n    return cloneEl;\n  }\n\n  replaceDragging() {\n    this.draggingClone.replaceWith(this.draggedEl);\n  }\n\n  clear() {\n    this.draggedEl = null;\n    this.draggingClone = null;\n  }\n}\n"],"names":["Card","constructor","content","this","createCard","removeCard","cardEl","remove","Columns","parentEl","querySelector","getMarkDown","bindToDOM","markDown","insertAdjacentHTML","addListeners","columns","document","forms","querySelectorAll","addEventListener","e","target","classList","contains","openForm","closeForm","el","closest","localStorage","setItem","innerHTML","closeError","forEach","form","parent","preventDefault","addCard","style","display","add","col","btn","showError","textArea","previousElementSibling","cardsContainer","value","card","cardCreation","container","draggedEl","draggingClone","cols","getItem","onMouseDown","onMouseUp","shiftX","offsetX","shiftY","offsetY","left","clientX","top","clientY","onDragged","onMouseMove","replaceDragging","clear","removeEventListener","width","window","getComputedStyle","column","cloneEl","createCloneEl","y","height","getBoundingClientRect","appendPosition","insertAdjacentElement","children","length","append","dragRect","cloneWidth","cloneHeight","createElement","replaceWith"],"sourceRoot":""}